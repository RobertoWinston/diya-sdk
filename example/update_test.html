<script type="text/javascript" src="../dist/diya-sdk.js"></script>
<script>


	function onClientAuthenticationFailure(){
		console.log("Cannot authenticate client !");
	}

	function onClientAuthenticated(node){
		console.log("Client authenticated !");

		node.get({
			service: 'update',
			func: 'ListPackages'
		}, function(data){
			if(data.packages) 
				console.log(data.packages); 
			if(data.error)
				console.log(data.error);
			
		});
		
		node.get({
			service: 'update',
			func: 'UpdateAll'
		}, function(data){
			if(data.packages) 
				console.log(data.packages); 
			if(data.error)
				console.log("Error in updateAll: "+data.error);
		});
		
		node.get({
			service: 'update',
			func: 'InstallPackage',
			data:{
				package: 'diya-node'
			}
		}, function(data){
			if(data.packages) 
				console.log(data.packages); 
			if(data.error)
				console.log(data.error);
			
		}); 

	}


	var client = new diya.DiyaClient("ws://localhost:1234", "admin", "pass");

	client.createSession(onClientAuthenticated, onClientAuthenticationFailure);


</script>
